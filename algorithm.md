# ピッチ検出アルゴリズム

このプロジェクトには複数のピッチ検出アルゴリズムが実装されており、用途に応じて選択可能です。

## デフォルトのアルゴリズム
現在のデフォルト設定（`script.js`）では **PYIN** が選択されています。これは正確性と安定性のバランスが最も優れているためです。

### アルゴリズムの比較と推奨

| アルゴリズム | 正確性・安定性 | 計算負荷 | 特徴 |
| :--- | :--- | :--- | :--- |
| **PYIN** | ★★★★★ | 高 ($O(N)$ 最適化済) | **最も優れている。** HMMにより時間的な一貫性を保ち、誤検出が極めて少ない。 |
| **MPM** | ★★★★☆ | 中 | YINの改良版。ピーク選択が賢く、YINよりも安定している。 |
| **YIN** | ★★★☆☆ | 中 | 標準的だが、特定の周波数でオクターブ誤認が発生しやすい。 |
| **Pitchy** | ★★☆☆☆ | 低 | 高速だが、ノイズや複雑な波形に対しては不安定になりやすい。 |

#### なぜ PYIN が優れているのか？
ピッチ検出における最大の課題は、倍音成分を基底周波数と誤認する「オクターブエラー」です。PYINは、単一のフレームだけでなく、前後のフレームの状態を確率的に考慮する（ビタビアルゴリズム）ため、突発的な誤検出を抑制し、滑らかで正確なピッチトラッキングが可能です。

#### パフォーマンスについて
ベンチマーク結果（1024 samples）:
- **Pitchy**: ~0.07ms (圧倒的に高速)
- **YIN/MPM/PYIN**: ~0.5ms - 0.6ms

PYINは統計処理やHMMの計算を含むため最も重いアルゴリズムですが、現代のブラウザ環境では十分リアルタイム動作（1ms以下）が可能な範囲に収まっています。したがって、**計算資源が極端に制限されていない限り、PYINを使用するのが最善の選択です。**
